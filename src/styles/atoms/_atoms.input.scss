/**
 * INPUTS
 * -------------------------------------------------------------------
 * Input fields are normalized in _base.normalize.scss
 */

/**
 * INPUTS VARIABLES
 * -------------------------------------------------------------------
 */

.a-input {
  --input-color:                   var(--text-color);
  --input-bg-color:                #{$white};
  --input-border-color:            var(--border-color);
  --input-placeholder-color:       #{$gray-400};

  --input-disabled-color:          var(--state-disabled);
  --input-disabled-bg-color:       #{$gray-100};
  --input-disabled-border-color:   #{$gray-200};

  --input-readonly-color:          var(--text-color);
  --input-readonly-bg-color:       #{$white};
  --input-readonly-border-color:   var(--border-color);

  --input-icon-color:              #{$gray-400};
  --input-icon-hover-color:        #{$gray-600};

  --input-required-color:          var(--danger-400);

  --input-success-border-color:    var(--state-success);
  --input-warning-border-color:    var(--state-warning);
  --input-danger-border-color:     var(--state-danger);

  --input-height:                  var(--spacer-xl);
  --input-padding:                 0 var(--spacer-s);
  --input-height-s:                var(--spacer-l);
  --input-padding-s:               0 var(--spacer-xs);
  --input-height-l:                var(--spacer-xxl);
  --input-padding-l:               0 var(--spacer);

  --select-height:                 var(--input-height);
  --select-padding:                var(--spacer-xs) var(--spacer);
  --select-height-s:               var(--input-height-s);
  --select-padding-s:              0 var(--spacer-xs);
  --select-height-l:               var(--input-height-l);
  --select-padding-l:              var(--spacer-s) var(--spacer);

  --textarea-height:               12rem;
  --textarea-padding:              var(--spacer-s) var(--spacer);
  --textarea-height-s:             8rem;
  --textarea-padding-s:            var(--spacer-xxs) var(--spacer-xs);
  --textarea-height-l:             16rem;
  --textarea-padding-l:            var(--spacer-s) var(--spacer);
}

/**
 * INPUT FONT-FAMILY
 * -------------------------------------------------------------------
 */

button,
input,
input[type='search'],
select,
textarea {
  appearance: none;
  font: inherit;
  margin: 0;
}

/**
 * INPUT PLACEHOLDER
 * -------------------------------------------------------------------
 */

%a-input {
  position: relative;

  small {
    display: block;
    margin: var(--spacer-xxs) 0;
    text-align: left;
  }

  input,
  select,
  textarea {
    border-radius: 0;
    line-height: normal;
    resize: vertical;
    transition: border-color var(--animation-normal);
    width: 100%;
  }

  input {
    min-height: var(--input-height);
    padding: var(--input-padding);
  }

  select {
    min-height: var(--select-height);
    padding: var(--select-padding);
  }

  textarea {
    min-height: var(--textarea-height);
    padding: var(--textarea-padding);
  }
}

.a-input {
  @extend %a-input;
}

/**
 * INPUT
 * -------------------------------------------------------------------
 */

.a-input {
  @include a-input(
    var(--input-color),
    var(--input-bg-color),
    var(--input-border-color),
    var(--input-placeholder-color),

    var(--input-disabled-color),
    var(--input-disabled-bg-color),
    var(--input-disabled-border-color),

    var(--input-readonly-color),
    var(--input-readonly-bg-color),
    var(--input-readonly-border-color)
  );

  &.w-textarea-padding {
    padding: var(--textarea-padding);
  }
}

/**
 * INPUT WRAPPER
 * -------------------------------------------------------------------
 */

.a-input__wrapper {
  position: relative;
}

/**
 * INPUT LABEL
 * -------------------------------------------------------------------
 */

.a-input__label {
  display: inline-block;
  margin-bottom: var(--spacer-xxs);
  text-align: left;

  + .a-switch,
  + .a-input__checkbox,
  + .a-input__radio {
    margin-top: var(--spacer-xxs);
  }
}

/**
 * INPUT LABEL MODIFIERS
 * -------------------------------------------------------------------
 */

.a-input__label--inline {
  margin-right: var(--spacer-xs);
  margin-top: calc(#{var(--line-height-base)} * #{var(--font-size-base)} - 1px);
}

/**
 * INPUT STATES
 * -------------------------------------------------------------------
 */

.a-input {
  &.has-success {
    @include a-input(
      var(--input-color),
      var(--input-bg-color),
      var(--input-success-border-color),
      var(--input-placeholder-color),

      var(--input-disabled-color),
      var(--input-disabled-bg-color),
      var(--input-disabled-border-color),

      var(--input-readonly-color),
      var(--input-readonly-bg-color),
      var(--input-readonly-border-color)
    );

    .a-input__wrapper:before {
      background: var(--state-success);
      mask: url('data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 15 15%22><path fill=%22none%22 stroke=%22%23ffffff%22 stroke-linecap=%22round%22 stroke-linejoin=%22round%22 stroke-width=%226.25%%22 d=%22M14.5.5l-10 14-4-4%22/></svg>') no-repeat center center;
    }
  }

  &.has-warning {
    @include a-input(
      var(--input-color),
      var(--input-bg-color),
      var(--input-warning-border-color),
      var(--input-placeholder-color),

      var(--input-disabled-color),
      var(--input-disabled-bg-color),
      var(--input-disabled-border-color),

      var(--input-readonly-color),
      var(--input-readonly-bg-color),
      var(--input-readonly-border-color)
    );

    .a-input__wrapper:before {
      background: var(--text-color);
      mask: url('data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 24 24%22><defs><style>.a{fill:none;stroke:%23ffffff;stroke-linecap:round;stroke-linejoin:round;stroke-width:6.25%}</style></defs><path class=%22a%22 d=%22M23 11.811A11.162 11.162 0 0112 23 10.837 10.837 0 011 12.192 11.162 11.162 0 0112 1a10.838 10.838 0 0111 10.811zM12 14.005v-7%22/><path class=%22a%22 d=%22M11.991 16.005a.245.245 0 00-.241.255.254.254 0 00.253.245.246.246 0 00.241-.255.253.253 0 00-.244-.245h-.005%22/></svg>') no-repeat center center;
    }
  }

  &.has-error {
    @include a-input(
      var(--input-color),
      var(--input-bg),
      var(--input-danger-border-color),
      var(--input-placeholder-color),

      var(--input-disabled-color),
      var(--input-disabled-bg-color),
      var(--input-disabled-border-color),

      var(--input-readonly-color),
      var(--input-readonly-bg-color),
      var(--input-readonly-border-color)
    );

    .a-input__wrapper:before {
      background: var(--state-danger);
      mask: url('data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 24 24%22><defs><style>.a{fill:none;stroke:%23ffffff;stroke-linecap:round;stroke-linejoin:round;stroke-width:6.25%}</style></defs><path class=%22a%22 d=%22M22.553 22.581a.569.569 0 01-.553.894H2a.569.569 0 01-.553-.894L11.553 2.37c.246-.492.648-.492.894 0zM12 16.979v-7%22/><path class=%22a%22 d=%22M11.991 18.979a.246.246 0 00-.241.255.255.255 0 00.254.245h.005a.246.246 0 00.241-.255.255.255 0 00-.25-.245h-.005%22/></svg>') no-repeat center center;
    }
  }

  &.has-success,
  &.has-warning,
  &.has-error {
    .a-input__wrapper:before {
      content: '';
      height: var(--spacer);
      mask-size: contain;
      position: absolute;
      right: 0;
      top: 50%;
      transform: translateY(-50%);
      width: var(--spacer-xl);
    }

    &.has-icon-right {
      .a-input__wrapper:before {
        right: var(--spacer-l);
      }

      .a-input__wrapper {
        input {
          padding-right: calc(var(--spacer-xl) + var(--spacer-l));
        }
      }
    }

    input {
      padding-right: var(--spacer-xl);
    }
  }

  &.is-required .a-input__label:after {
    color: var(--input-required-color);
    content: '*';
    margin-left: var(--spacer-3xs);
  }
}

/**
 * INPUT WITH ICON LEFT OR RIGHT
 * -------------------------------------------------------------------
 */

.a-input {
  &.has-icon-left .a-input__wrapper > .ai,
  &.has-icon-right .a-input__wrapper > .ai {
    color: var(--input-icon);
    font-size: rem(20px);
    pointer-events: none;
    position: absolute;
    text-align: center;
    top: 50%;
    transform: translateY(-50%);
    user-select: none;
    width: var(--spacer-xl);

    &.is-clickable {
      align-items: center;
      cursor: pointer;
      display: flex;
      height: 100%;
      pointer-events: auto;
      transition: color var(--animation-normal);

      &:hover {
        color: var(--input-icon-hover);
      }
    }
  }

  &.has-icon-left .a-input__wrapper {
    input,
    select {
      padding-left: var(--spacer-xl);
    }

    > .ai {
      left: 0;
    }
  }

  &.has-icon-right .a-input__wrapper {
    input,
    select {
      padding-right: var(--spacer-xl);
    }

    > .ai {
      right: 0;
    }
  }
}

/**
 * INPUT WITH ADDON
 * -------------------------------------------------------------------
 */

.a-input.has-addon .a-input__wrapper {
  display: flex;
}

.a-input__addon {
  line-height: var(--input-height);
  padding: 0 var(--spacer-xs);
  text-align: center;
  white-space: nowrap;
}

/**
 * INLINE INPUT
 * -------------------------------------------------------------------
 */

.a-input--inline {
  input,
  select,
  textarea,
  .a-input__checkbox,
  .a-input__radio {
    width: auto;
  }
}

.a-input__wrapper--inline {
  display: inline-block;
}

/**
 * INPUT SIZES
 * -------------------------------------------------------------------
 */

.a-input {
  &.a-input--s {
    input {
      min-height: var(--input-height-s);
      padding: var(--input-padding-s);
    }

    select {
      @-moz-document url-prefix() {
        line-height: 2.1; // Fixes Firefox line-height bug
      }

      min-height: var(--select-height-s);
      padding: var(--select-padding-s);
    }

    textarea {
      min-height: var(--textarea-height-s);
      padding: var(--textarea-padding-s);
    }

    .a-input__addon {
      line-height: var(--input-height-s);
    }
  }

  &.a-input--l {
    input {
      min-height: var(--input-height-l);
      padding: var(--input-padding-l);
    }

    select {
      min-height: var(--select-height-l);
      padding: var(--select-padding-l);
    }

    textarea {
      min-height: var(--textarea-height-l);
      padding: var(--textarea-padding-l);
    }

    .a-input__addon {
      line-height: var(--input-height-l);
    }
  }
}
