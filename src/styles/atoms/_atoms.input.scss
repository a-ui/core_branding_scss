/**
 * INPUTS
 * -------------------------------------------------------------------
 * Input fields are normalized in _base.normalize.scss
 */

/**
 * INPUTS VARIABLES
 * -------------------------------------------------------------------
 */

.a-input {
  --input-color:                   var(--text-color);
  --input-bg-color:                #{$white};
  --input-border-color:            var(--border-color);
  --input-placeholder-color:       #{$gray-400};

  --input-disabled-color:          var(--state-disabled);
  --input-disabled-bg-color:       #{$gray-100};
  --input-disabled-border-color:   #{$gray-200};

  --input-readonly-color:          var(--text-color);
  --input-readonly-bg-color:       #{$white};
  --input-readonly-border-color:   var(--border-color);

  --input-icon-color:              #{$gray-400};
  --input-icon-hover-color:        #{$gray-600};
  --input-icon-size:               1.25rem;

  --input-success-border-color:    var(--input-border-color);
  --input-danger-border-color:     var(--state-danger);

  --input-height:                  var(--spacer-xl);
  --input-padding-vertical:        0;
  --input-padding-horizontal:      var(--spacer-s);

  --input-height-s:                var(--spacer-l);
  --input-padding-vertical-s:      var(--input-padding-vertical);
  --input-padding-horizontal-s:    var(--spacer-xs);

  --input-height-l:                var(--spacer-xxl);
  --input-padding-vertical-l:      var(--input-padding-vertical);
  --input-padding-horizontal-l:    var(--spacer);

  --textarea-height:               12rem;
  --textarea-height-s:             8rem;
  --textarea-height-l:             16rem;
}

/**
 * INPUT FONT-FAMILY
 * -------------------------------------------------------------------
 */

button,
input,
input[type='search'],
select,
textarea {
  appearance: none;
  font: inherit;
  margin: 0;
}

/**
 * INPUT PLACEHOLDER
 * -------------------------------------------------------------------
 */

%a-input {
  position: relative;

  input,
  select,
  textarea {
    border-radius: 0;
    line-height: normal;
    resize: vertical;
    transition: border-color var(--animation-normal);
    width: 100%;
  }

  input,
  select {
    min-height: var(--input-height);
    padding: var(--input-padding-vertical) var(--input-padding-horizontal);
  }

  textarea {
    min-height: var(--textarea-height);
    padding: var(--input-padding-horizontal);
  }
}

.a-input {
  @extend %a-input;
}

/**
 * INPUT
 * -------------------------------------------------------------------
 */

.a-input {
  @include a-input(
    var(--input-color),
    var(--input-bg-color),
    var(--input-border-color),
    var(--input-placeholder-color),

    var(--input-disabled-color),
    var(--input-disabled-bg-color),
    var(--input-disabled-border-color),

    var(--input-readonly-color),
    var(--input-readonly-bg-color),
    var(--input-readonly-border-color)
  );

  &.w-textarea-padding {
    padding: var(--input-padding-horizontal);
  }
}

/**
 * INPUT WRAPPER
 * -------------------------------------------------------------------
 */

.a-input__wrapper {
  position: relative;
}

/**
 * INPUT LABEL
 * -------------------------------------------------------------------
 */

.a-input__label {
  display: inline-block;
  margin-bottom: var(--spacer-xxs);
  text-align: left;

  + .a-switch,
  + .a-input__checkbox,
  + .a-input__radio {
    margin-top: var(--spacer-xxs);
  }
}

/**
 * INPUT INFO
 * -------------------------------------------------------------------
 */

.a-input__info {
  display: flex;
  justify-content: space-between;
  margin: var(--spacer-xxs) 0;
}

.a-input__character-counter {
  flex: 1 0 auto;
  margin-left: var(--spacer);
  text-align: right;
}

.a-input__error-text,
.a-input__success-text {
  display: flex;

  .ai {
    margin-right: var(--spacer-xxs);
  }
}

.a-input__success-text {
  color: var(--state-success);
}

.a-input__error-text {
  color: var(--state-danger-light);
}

/**
 * INPUT LABEL MODIFIERS
 * -------------------------------------------------------------------
 */

.a-input__label--inline {
  margin-right: var(--spacer-xs);
  margin-top: calc(#{var(--line-height-base)} * #{var(--font-size-base)} - 1px);
}

/**
 * INPUT STATES
 * -------------------------------------------------------------------
 */

.a-input {
  &.has-success {
    @include a-input(
      var(--input-color),
      var(--input-bg-color),
      var(--input-success-border-color),
      var(--input-placeholder-color),

      var(--input-disabled-color),
      var(--input-disabled-bg-color),
      var(--input-disabled-border-color),

      var(--input-readonly-color),
      var(--input-readonly-bg-color),
      var(--input-readonly-border-color)
    );
  }

  &.has-error {
    @include a-input(
      var(--input-color),
      var(--input-bg),
      var(--input-danger-border-color),
      var(--input-placeholder-color),

      var(--input-disabled-color),
      var(--input-disabled-bg-color),
      var(--input-disabled-border-color),

      var(--input-readonly-color),
      var(--input-readonly-bg-color),
      var(--input-readonly-border-color)
    );
  }

  &.is-required .a-input__label:after {
    content: '*';
    margin-left: var(--spacer-3xs);
  }
}

/**
 * INPUT WITH ICON LEFT OR RIGHT
 * -------------------------------------------------------------------
 */

.a-input {
  &.has-icon-left .a-input__wrapper > .ai,
  &.has-icon-right .a-input__wrapper > .ai {
    color: var(--input-icon-color);
    font-size: var(--input-icon-size);
    pointer-events: none;
    position: absolute;
    text-align: center;
    top: 50%;
    transform: translateY(-50%);
    user-select: none;

    &.is-clickable {
      align-items: center;
      cursor: pointer;
      display: flex;
      height: 100%;
      pointer-events: auto;
      transition: color var(--animation-normal);

      &:hover {
        color: var(--input-icon-hover-color);
      }
    }
  }

  &.has-icon-left .a-input__wrapper {
    input,
    select {
      padding-left: calc(#{var(--input-padding-horizontal)} * 2 + #{var(--input-icon-size)});
    }

    > .ai {
      left: var(--input-padding-horizontal);
    }
  }

  &.has-icon-right .a-input__wrapper {
    input,
    select {
      padding-right: calc(#{var(--input-padding-horizontal)} * 2 + #{var(--input-icon-size)});
    }

    > .ai {
      right: var(--input-padding-horizontal);
    }
  }
}

/**
 * INPUT WITH ADDON LEFT OR RIGHT
 * -------------------------------------------------------------------
 */

.a-input {
  &.has-addon-left,
  &.has-addon-right {
    input,
    select {
      &:focus {
        outline: none;
      }
    }

    .a-input__wrapper {
      display: flex;
    }

    &:focus-within .a-input__wrapper {
      @include focus;
    }
  }

  &.has-addon-left {
    input,
    select {
      border-left: none;
    }

    .a-input__addon {
      border-left: var(--border-width) solid var(--input-border-color);
      padding-left: var(--input-padding-horizontal);
    }
  }

  &.has-addon-right {
    input {
      border-right: none;
    }

    .a-input__addon {
      border-right: var(--border-width) solid var(--input-border-color);
      padding-right: var(--input-padding-horizontal);
    }
  }
}

.a-input__addon {
  border-bottom: var(--border-width) solid var(--input-border-color);
  border-top: var(--border-width) solid var(--input-border-color);
  color: var(--input-icon-color);
  line-height: var(--input-height);
  text-align: center;
  white-space: nowrap;
}

/**
 * INLINE INPUT
 * -------------------------------------------------------------------
 */

.a-input--inline {
  input,
  select,
  textarea,
  .a-input__checkbox,
  .a-input__radio {
    width: auto;
  }
}

.a-input__wrapper--inline {
  display: inline-block;
}

/**
 * INPUT SIZES
 * -------------------------------------------------------------------
 */

.a-input {
  &.a-input--s {
    input,
    select {
      min-height: var(--input-height-s);
      padding: var(--input-padding-vertical-s) var(--input-padding-horizontal-s);
    }

    select {
      @-moz-document url-prefix() {
        line-height: 2.1; // Fixes Firefox line-height bug
      }
    }

    textarea {
      min-height: var(--textarea-height-s);
      padding: var(--input-padding-horizontal-s);
    }

    .a-input__addon {
      line-height: var(--input-height-s);
    }

    &.has-icon-left .a-input__wrapper {
      input,
      select {
        padding-left: calc(#{var(--input-padding-horizontal-s)} * 2 + #{var(--input-icon-size)});
      }

      > .ai {
        left: var(--input-padding-horizontal-s);
      }
    }

    &.has-icon-right .a-input__wrapper {
      input,
      select {
        padding-right: calc(#{var(--input-padding-horizontal-s)} * 2 + #{var(--input-icon-size)});
      }

      > .ai {
        right: var(--input-padding-horizontal-s);
      }
    }

    &.has-addon-left .a-input__addon {
      padding-left: var(--input-padding-horizontal-s);
    }

    &.has-addon-right .a-input__addon {
      padding-right: var(--input-padding-horizontal-s);
    }
  }

  &.a-input--l {
    input,
    select {
      min-height: var(--input-height-l);
      padding: var(--input-padding-vertical-l) var(--input-padding-horizontal-l);
    }

    textarea {
      min-height: var(--textarea-height-l);
      padding: var(--input-padding-horizontal-l);
    }

    .a-input__addon {
      line-height: var(--input-height-l);
    }

    &.has-icon-left .a-input__wrapper {
      input,
      select {
        padding-left: calc(#{var(--input-padding-horizontal-l)} * 2 + #{var(--input-icon-size)});
      }

      > .ai {
        left: var(--input-padding-horizontal-l);
      }
    }

    &.has-icon-right .a-input__wrapper {
      input,
      select {
        padding-right: calc(#{var(--input-padding-horizontal-l)} * 2 + #{var(--input-icon-size)});
      }

      > .ai {
        right: var(--input-padding-horizontal-l);
      }
    }

    &.has-addon-left .a-input__addon {
      padding-left: var(--input-padding-horizontal-l);
    }

    &.has-addon-right .a-input__addon {
      padding-right: var(--input-padding-horizontal-l);
    }
  }
}
