/**
 * TABLE VARIABLES
 * -------------------------------------------------------------------
 */

.a-table,
.a-table-scrollable-wrapper {
  --table-bg-color:                  #{$white};
  --table-border-color:              var(--border-color);
  --table-border-color-light:        #{$gray-200};
  --table-highlight-bg-color:        var(--theme1-050);
  --table-highlight-border-color:    var(--theme1-400);

  --table-striped-bg-color:          var(--bg-color-light);

  --table-sort-btn-color:            var(--text-color);
  --table-sort-btn-active-color:     var(--theme1-400);
  --table-sort-btn-bg-color:         #{$white};
  --table-sort-btn-hover-bg-color:   #{$gray-100};
  --table-sort-btn-icon-color:       #{$gray-300};
}

/**
 * TABLE
 * -------------------------------------------------------------------
 */

.a-table {
  background-color: var(--table-bg-color);
  border: var(--border-width) solid var(--table-border-color);
  border-collapse: collapse;
  width: 100%;

  caption {
    margin-bottom: var(--spacer-xxs);
    text-align: left;
  }

  thead tr {
    border-bottom: var(--border-width) solid var(--table-border-color);
  }

  tbody tr {
    transition: background-color var(--animation-normal);

    &:not(:last-child) {
      border-bottom: var(--border-width) solid var(--table-border-color-light);
    }

    &.is-selected,
    &.is-clickable:active,
    &.is-clickable:hover,
    &.is-clickable:focus {
      background-color: var(--table-highlight-bg-color);
      cursor: pointer;
    }

    &.is-selected td {
      border-top: var(--border-width) solid var(--table-highlight-border-color);
      border-bottom: var(--border-width) solid var(--table-highlight-border-color);

      &:first-child {
        border-left: var(--border-width) solid var(--table-highlight-border-color);
      }

      &:last-child {
        border-right: var(--border-width) solid var(--table-highlight-border-color);
      }
    }
  }

  tr {
    height: var(--spacer-xl);
  }

  th,
  td {
    padding: var(--spacer-xs);

    &:not(.u-text-center):not(.u-text-right):not(.u-text-justify) {
      text-align: left;
    }

    &.is-condensed {
      padding: var(--spacer-3xs) var(--spacer-xs);
    }

    &.is-collapsed {
      padding: 0;
    }
  }
}

/**
 * TABLE ELEMENTS
 * -------------------------------------------------------------------
 */

.a-table__sort-button {
  align-items: center;
  background-color: var(--table-sort-btn-bg-color);
  border: none;
  color: var(--table-sort-btn-color);
  cursor: pointer;
  display: flex;
  font-weight: var(--font-weight-bold);
  justify-content: flex-start;
  margin: 0;
  min-height: var(--spacer-xl);
  padding: 0 var(--spacer-xs);
  transition: background-color var(--animation-normal);
  user-select: none;
  width: 100%;

  &.a-table__sort-button--align-right {
    justify-content: flex-end;
  }

  &.is-unsorted,
  &.is-sorted-asc,
  &.is-sorted-asc {
    color: var(--table-sort-btn-active-color);

    &:after {
      background: var(--table-sort-btn-icon-color);
      content: '';
      height: .875rem;
      margin-left: var(--spacer-xxs);
      mask-size: contain;
      width: .875rem;
    }
  }

  &.is-unsorted {
    &:after {
      mask: url('data:image/svg+xml;utf8,<svg id=%22arrow-down-1%22 viewBox=%22-1 -1 17 17%22 xml:space=%22preserve%22 xmlns=%22http://www.w3.org/2000/svg%22><style>.azst0{fill:none;stroke:%23ffffff;stroke-width:6.25%;stroke-linecap:round;stroke-linejoin:round}</style><path class=%22azst0%22 d=%22M.5 3.6l6.8 7.7c.1.1.3.1.4 0l6.8-7.7%22/></svg>') no-repeat center center;
    }

    &:hover,
    &:focus {
      &:after {
        mask: url('data:image/svg+xml;utf8,<svg id=%22arrow-up-1%22 viewBox=%22-1 -1 17 17%22 xml:space=%22preserve%22 xmlns=%22http://www.w3.org/2000/svg%22><style>.bgst0{fill:none;stroke:%23ffffff;stroke-width:6.25%;stroke-linecap:round;stroke-linejoin:round}</style><path class=%22bgst0%22 d=%22M14.5 11.4L7.7 3.7c-.1-.1-.3-.1-.4 0L.5 11.4%22/></svg>') no-repeat center center;
      }
    }
  }

  &.is-sorted-asc {
    &:after {
      background: var(--table-sort-btn-active-color);
      mask: url('data:image/svg+xml;utf8,<svg id=%22arrow-up-1%22 viewBox=%22-1 -1 17 17%22 xml:space=%22preserve%22 xmlns=%22http://www.w3.org/2000/svg%22><style>.bgst0{fill:none;stroke:%23ffffff;stroke-width:6.25%;stroke-linecap:round;stroke-linejoin:round}</style><path class=%22bgst0%22 d=%22M14.5 11.4L7.7 3.7c-.1-.1-.3-.1-.4 0L.5 11.4%22/></svg>') no-repeat center center;
    }
  }

  &.is-sorted-desc {
    &:after {
      background: var(--table-sort-btn-active-color);
      mask: url('data:image/svg+xml;utf8,<svg viewBox=%220 0 24 24%22 xmlns=%22http://www.w3.org/2000/svg%22><g stroke-linecap=%22round%22 stroke=%22%23000%22 fill=%22none%22 stroke-linejoin=%22round%22 stroke-width=%226.25%%22><path class=%22cls-1%22 d=%22M9.6 5a2.12 2.12 0 102.12-2.12A2.12 2.12 0 009.6 5zM19.14 7.5l-7.27 1.34-7-1.36a1 1 0 100 2l4.33 1.27v4.51l-2.28 4.4A1 1 0 007.4 21a1.12 1.12 0 001.44-.46l2.61-5.15 2.61 5.15a1.1 1.1 0 001.44.46 1 1 0 00.53-.58.94.94 0 00-.06-.77c-.27-.52-1.21-2.44-2.19-4.4v-4.61l5.36-1.13a1 1 0 100-2z%22/><circle class=%22cls-1%22 cx=%2212%22 cy=%2212%22 r=%2211.5%22/></g></svg>') no-repeat center center;
    }
  }
}

/**
 * TABLE SCHEMES
 * -------------------------------------------------------------------
 */

.a-table.a-table--striped tbody tr {
  &:nth-child(odd) {
    background-color: var(--table-striped-bg-color);

    &.is-selected,
    &.is-clickable:active,
    &.is-clickable:hover,
    &.is-clickable:focus {
      background-color: var(--table-highlight-bg-color);
    }
  }
}

.a-table.a-table--open {
  border: none;
}

/**
 * TABLE RESPONSIVE WRAPPER
 * -------------------------------------------------------------------
 */

.a-table-responsive-wrapper {
  position: relative;

  &:not(.has-first-column-fixed) {
    // Display a drop shadow on the left inner side of the table
    &.has-shadow-left:before {
      background-color: var(--box-shadow-color);
      bottom: 0;
      content: '';
      left: 0;
      position: absolute;
      top: 0;
      width: var(--spacer-xs);
    }
  }

  &:not(.has-last-column-fixed) {
    // Display a drop shadow on the right inner side of the table
    &.has-shadow-right:after {
      background-color: var(--box-shadow-color);
      bottom: 0;
      content: '';
      position: absolute;
      right: 0;
      top: 0;
      width: var(--spacer-xs);
    }
  }

  // Make first column of the table fixed
  &.has-first-column-fixed {
    table {
      tr th:first-child,
      tr td:first-child {
        background-color: var(--table-bg-color);
        box-shadow: inset calc(var(--border-width) * -1) 0 0 0 var(--table-border-color);
        left: 0;
        position: sticky;
      }
    }

    /*
      When the first column of the table is fixed, the drop shadow on the
      left side of the table is displayed on the right side of the fixed first column
    */
    &.has-shadow-left table {
      tr th:first-child,
      tr td:first-child {
        &:after {
          background-color: var(--box-shadow-color);
          bottom: 0;
          content: '';
          position: absolute;
          right: 0;
          top: 0;
          transform: translateX(100%);
          width: var(--spacer-xs);
        }
      }
    }
  }

  // Make last column of the table fixed
  &.has-last-column-fixed {
    table {
      tr th:last-child,
      tr td:last-child {
        background-color: var(--table-bg-color);
        box-shadow: inset var(--border-width) 0 0 0 var(--table-border-color);
        position: sticky;
        right: 0;
      }
    }

    /*
      When the last column of the table is fixed, the drop shadow on the
      right side of the table is displayed on the lefst side of the fixed last column
    */
    &.has-shadow-right table {
      tr th:last-child,
      tr td:last-child {
        &:after {
          background-color: var(--box-shadow-color);
          bottom: 0;
          content: '';
          left: 0;
          position: absolute;
          top: 0;
          transform: translateX(-100%);
          width: var(--spacer-xs);
        }
      }
    }
  }
}

.a-table-scrollable-wrapper {
  -ms-overflow-style: scrollbar;
  -webkit-overflow-scrolling: touch;
  border: var(--border-width) solid var(--table-border-color);
  overflow-x: auto;
  overflow-y: hidden;
  width: 100%;

  table {
    background-color: transparent;
    border: none;
    margin-bottom: calc(var(--border-width) * -1);

    > thead > tr,
    > tbody > tr,
    > tfoot > tr {
      > td,
      > th {
        white-space: nowrap;
      }
    }
  }
}
